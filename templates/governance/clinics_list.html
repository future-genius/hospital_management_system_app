{% extends "base.html" %}

{% block title %}Service Departments - Clinical Facility Network{% endblock %}

{% block content %}
<div class="container py-4" style="max-width:1400px;">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h1 class="h3 mb-1">Service Departments</h1>
      <p class="text-muted mb-0">Manage healthcare services and clinical departments</p>
    </div>
    <a href="{{ url_for('governance.create_clinic') }}" class="btn btn-success d-flex align-items-center gap-2">
      <i class="fas fa-plus-circle"></i> Add Service
    </a>
  </div>

  {% if clinics %}
    <div class="row g-3">
      {% for clinic in clinics %}
        {% set words = clinic.clinic_title.split() %}
        {% set abbr_parts = [] %}
        {% for word in words %}
          {% if abbr_parts.append(word[:2].upper()) %}{% endif %}
        {% endfor %}
        {% set dept_abbr = "MC" + abbr_parts|join("") %}
        
        <div class="col-sm-6 col-md-4 col-lg-3">
          <div class="card h-100 shadow-sm">
            <!-- Card Header -->
            <div class="card-header text-white" style="background: linear-gradient(135deg, var(--success), #06B6D4);">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <h5 class="mb-1">{{ clinic.clinic_title }}</h5>
                  <small class="opacity-75">Healthcare Service</small>
                </div>
                <i class="fas fa-hospital fa-lg opacity-75"></i>
              </div>
            </div>
            <!-- Card Body -->
            <div class="card-body">
              <p class="text-muted small mb-3">{{ clinic.clinic_notes or 'No description provided' }}</p>
              <div class="d-flex align-items-center gap-2 bg-light p-2 rounded mb-3">
                <i class="fas fa-info-circle text-primary"></i>
                <small class="text-muted">ID: <strong>{{ dept_abbr }}</strong></small>
              </div>
              <div class="d-flex gap-2">
                <a href="#" class="btn btn-outline-primary flex-fill d-flex justify-content-center align-items-center gap-1">
                  <i class="fas fa-edit"></i> Edit
                </a>
                <button class="btn btn-outline-danger flex-fill d-flex justify-content-center align-items-center gap-1">
                  <i class="fas fa-trash"></i> Delete
                </button>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <!-- Empty State -->
    <div class="text-center p-5 border border-success rounded-3 bg-light">
      <i class="fas fa-clinic-medical text-success display-3 mb-3"></i>
      <h4 class="fw-bold">No services configured</h4>
      <p class="text-muted mb-3">Create your first service department to start managing your healthcare facility.</p>
      <a href="{{ url_for('governance.create_clinic') }}" class="btn btn-success">
        <i class="fas fa-plus-circle"></i> Create First Service
      </a>
    </div>
  {% endif %}
</div>
{% endblock %}
